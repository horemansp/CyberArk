{"aapilets":{"scim":{"enabled":false,"version":2},"name":"Form-field-selector-validation","title":"","start-connection":"form-definition-1118829155","apiconnection":{"api-webhook-desc":{},"api-custom-values":{"tenantUrl":{"formula":false,"prompt":false,"saved":false,"value":"phscim"}},"manualProcess":false,"mask-parameters":{"aapi-client-values":[],"aapi-custom-values":[],"aapilet-external-request":[],"api-definition-1111311284":[],"api-definition-1111984617":[],"api-definition-1115882215":[],"api-definition-1118413952":[],"form-definition-1118829155":[],"form-definition-1119026889":[]},"run":{"browser":{"enabled":true,"oidcEnabled":true,"oidcid":"7c2ed9c9-53f6-4062-a780-41da58f49931","workspaceEnabled":true},"endpoint":{"active":false,"apikey":""},"manual":{"active":true,"postrun":{"api-condition-stop-definition-1111029663":{"close":false,"customredirect":{"enabled":true,"isredirected":false,"redirecturl":[{"_id":"MID03350630293918","ref":"text","value":"https://www.gcu.ac.uk/"}]},"remain":false},"api-condition-stop-definition-1115616371":{"close":false,"customredirect":{"enabled":true,"isredirected":false,"redirecturl":[{"_id":"MID17672786309676747","ref":"text","value":"https://www.gcu.ac.uk/"}]},"remain":false},"api-condition-stop-definition-1117553377":{"close":false,"customredirect":{"enabled":true,"isredirected":false,"redirecturl":[{"_id":"MID17672786309676747","ref":"text","value":"https://www.gcu.ac.uk/"}]},"remain":false},"api-condition-stop-definition-1119592519":{"close":false,"customredirect":{"enabled":true,"isredirected":false,"redirecturl":[{"_id":"MID4079873272783259","ref":"text","value":"https://www.gcu.ac.uk/"}]},"remain":false},"close":false,"customredirect":{"enabled":false,"isredirected":false,"redirecturl":[]},"redirect":false,"redirecturl":"","remain":true,"workspace":false}},"schedule":{"active":false,"day":[],"options":"periodically","periodically":"10m","range":[],"time":[]}},"timer":{"interval-days":"","interval-endtime":"","interval-hours":"","interval-specificdate":"","interval-starttime":"","interval-timezone":"","interval-type":"minutes","interval-value":"10"},"form-definition-1118829155":{"appname":"appname-1118829155","basePath":null,"definition-id":"1118829155","description":"","form-map-template":{"components":[{"label":"MFA Selector","widget":"choicesjs","autofocus":true,"tableView":true,"data":{"values":[{"label":"SMS","value":"sms"},{"label":"MFA App","value":"MfaApp"}]},"validateWhenHidden":false,"key":"MfaSelector","type":"select","input":true},{"label":"Mobile Number","applyMaskOn":"change","tableView":true,"defaultValue":"+","calculateValue":"function isValidPhoneNumber(input) {\n    // Check if the input starts with a '+'\n    if (input.charAt(0) !== '+') {\n        return false;\n    }\n\n    // Loop through the characters of the string starting from index 1\n    for (let i = 1; i < input.length; i++) {\n        const char = input.charAt(i);\n\n        // If any character is not a digit (0-9), return false\n        if (char < '0' || char > '9') {\n            return false;\n        }\n    }\n\n    // If all checks pass, return true\n    return true;\n}\n\n\n\nif(!isValidPhoneNumber(data.mobileNr)){\n  value = value.slice(0,-1);\n}","validateWhenHidden":false,"key":"mobileNr","conditional":{"show":true,"when":"MfaSelector","eq":"sms"},"type":"textfield","input":true},{"label":"errMsg","attrs":[{"attr":"style","value":"color:Tomato"}],"content":"Mobile number format<br><br>\nShould be +____________<br>\n- starts with a +<br>\n- Has at least 10 digits<br>\nexample: +4412345678","refreshOnChange":true,"hidden":true,"key":"errMsg","customConditional":"function isValidPhoneNumber(input) {\n \n  // Check if the input starts with a '+'\n  if (input.charAt(0) !== '+') {\n      return false;\n  }\n \n  // Initialize a counter for numerical characters\n  let numericCount = 0;\n \n  // Loop through the characters of the string starting from index 1\n  for (let i = 1; i < input.length; i++) {\n      const char = input.charAt(i);\n \n      // Check if the character is a digit (0-9)\n      if (char >= '0' && char <= '9') {\n          numericCount++;\n      }\n \n      // If we already have 10 numerical characters, return true\n      if (numericCount >= 10) {\n          return true;\n      }\n  }\n \n  // If less than 10 numerical characters are found, return false\n  return numericCount >= 10;\n}\n \n \nif(isValidPhoneNumber(data.mobileNr)){\nshow = false;\n} else {\n // Check if SMS is selected as the MFA option\n  if(data.MfaSelector !== 'sms') {\n    show = false\n  } else {\n    show = true;\n  }\n}","type":"htmlelement","input":false,"tableView":false},{"label":"MFAMsg","attrs":[{"attr":"","value":""}],"content":"go here to download the app","refreshOnChange":false,"hidden":true,"key":"gcuMfaMsg","conditional":{"show":true,"when":"MfaSelector","eq":"MfaApp"},"type":"htmlelement","input":false,"tableView":false},{"customConditional":"function isValidPhoneNumber(input) {\n    // Check if the input starts with a '+'\n    if (input.charAt(0) !== '+') {\n        return false;\n    }\n\n    // Initialize a counter for numerical characters\n    let numericCount = 0;\n\n    // Loop through the characters of the string starting from index 1\n    for (let i = 1; i < input.length; i++) {\n        const char = input.charAt(i);\n\n        // Check if the character is a digit (0-9)\n        if (char >= '0' && char <= '9') {\n            numericCount++;\n        }\n\n        // If we already have 10 numerical characters, return true\n        if (numericCount >= 10) {\n            return true;\n        }\n    }\n\n    // If less than 10 numerical characters are found, return false\n    return numericCount >= 10;\n}\n\n\nif(isValidPhoneNumber(data.mobileNr)){\n  show = true;\n} else {\n  show = false;\n}","disableOnInvalid":true,"input":true,"key":"submit","label":"Save","saveOnEnter":false,"showValidations":false,"tableView":false,"type":"button"},{"input":true,"key":"cancel","label":"Cancel","saveOnEnter":false,"showValidations":false,"tableView":false,"type":"button"}]},"form-map-values":{"cancel":[],"html":[],"select":{"label":[],"selected":[],"value":[]},"submit":[],"submit1":[],"MfaSelector":{"label":[],"selected":[],"value":[]},"errMsg":[],"gcuMfaMsg":[],"mobileNr":[{"_id":"MID5572974087026197","ref":"text","value":"+"}]},"formheader":"EnterMobileNr","formid":"","formname":"Enter Mobile","formuniqueid":"form-definition-1118829155","goto":"api-condition-stop-definition-1115616371","id":"form-definition-1118829155","isEditForm":true,"isTemplate":false,"ismyform":false,"logo":"","nodeType":"Form","objData":{"item":{"data":{"basePath":"/","consumes":[],"host":"virtserver.swaggerhub.com","info":{"description":"","title":"api-title-16381948","version":"1.0.0"},"paths":{"/example":{"get":{"description":"This is an example opeartion to show how security is applied to the call.","responses":{"200":{"description":"OK"}},"summary":"Server example operation"}}},"produces":[],"schemes":["https"],"security":[],"swagger":"2.0","x-applicationinfo":{"x-API-Description":"API Description","x-API-Documentation-URL":"API Documentation URL","x-API-Name":"apiname","x-App-Description":"Description of Application","x-App-Logo":"Logo of Application","x-App-Name":"appname","x-App-URL":"Home page of application controlling this API","x-Category":"API Category","x-Company":"company","x-Company-Github":"Company Git URL","x-additionalHostNames":"Name of additional controlling this API"}}}},"title":null,"type":"form","guid":"form-definition-1118829155"},"api-condition-stop-definition-1115616371":{"condition-id":"1115616371","condition-type":"Stop","customresponse":false,"guid":"api-condition-stop-definition-1115616371","id":"api-condition-stop-definition-1115616371","killconnection":true,"nodeType":"Stop","responseformat":{"content-type":"application/json","response-body":[],"response-config":{"response-header":{},"response-body":{}},"response-header":{}},"usecustomresponse":false}},"enabled":false}}