{"aapilets":{"scim":{"enabled":false,"version":2},"name":"PH-ExternalCallBasicAuth","title":"","start-connection":"dataStore-definition-1111400700","apiconnection":{"api-webhook-desc":{},"api-custom-values":{},"manualProcess":false,"mask-parameters":{"aapi-custom-values":[],"aapilet-external-request":[],"aapilet-webhook-request-body":[],"api-definition-1111401730":[],"api-definition-1118004234":[],"dataStore-definition-1111400700":[],"dataStore-definition-1113023028":[],"dataStore-definition-1117620620":[],"http-request":[],"loop-definition-1111161810":[]},"run":{"browser":{"enabled":true,"oidcEnabled":false,"oidcid":"c6cac8ce-00da-4cc5-a48b-50e3455de343","workspaceEnabled":true},"endpoint":{"active":true,"apikey":""},"manual":{"active":true,"postrun":{"api-condition-stop-definition-1114129197":{"close":true,"customredirect":{"enabled":false,"isredirected":false,"redirecturl":[]},"remain":false},"close":false,"customredirect":{"enabled":false,"isredirected":false,"redirecturl":[]},"redirect":false,"redirecturl":"","remain":true,"workspace":false}},"schedule":{"active":false,"day":[],"options":"periodically","periodically":"10m","range":[],"time":[]}},"timer":{"interval-days":"","interval-endtime":"","interval-hours":"","interval-specificdate":"","interval-starttime":"","interval-timezone":"","interval-type":"minutes","interval-value":"10"},"dataStore-definition-1111400700":{"dataStore-map-values":{"dataid":[],"dataname":[{"_id":"MID6135790906271392","ref":"text","value":"LDAP_ID"}]},"dataStoreName":"Read_LDAP_ID (run GetLDAP-DirID Flow first!)","datastoreType":"read","definition-id":"1111400700","goto":"dataStore-definition-1111121718","guid":"dataStore-definition-1111400700","id":"dataStore-definition-1111400700","isDatastore":true,"nodeType":"DSRead","schema":{},"type":"datastore"},"dataStore-definition-1111121718":{"dataStore-map-values":{"data":[{"_id":"MID22526455735883588","ref":"text","value":"{\"status\":\"Flow started\"}"}],"dataname":[{"_id":"MID1447271549196958","ref":"text","value":"DC-STATUS-"},{"_id":"MID5849730764213978","ref":"aapilet-webhook-request-body","title":"Requestinguser Email","type":"(s)","value":"RequestingUser{}.email(s)"},{"_id":"MID15024127878661298","ref":"text","value":""}]},"dataStoreName":"CreateStatusMessage","datastoreType":"create","definition-id":"1111121718","goto":"dataStore-definition-1117674246","guid":"dataStore-definition-1111121718","id":"dataStore-definition-1111121718","isDatastore":true,"nodeType":"DSCreate","schema":{},"type":"datastore"},"dataStore-definition-1117674246":{"dataStore-map-values":{"data":[{"_id":"MID572386308689862","ref":"text","value":"Groups:"}],"dataname":[{"_id":"MID05302973509401898","ref":"text","value":"DC-GROUPS-"},{"_id":"MID41509754345213246","ref":"aapilet-webhook-request-body","title":"Requestinguser Email","type":"(s)","value":"RequestingUser{}.email(s)"},{"_id":"MID34308713011500114","ref":"text","value":""}]},"dataStoreName":"CreateTempGroupMembershipsDB","datastoreType":"create","definition-id":"1117674246","goto":"api-definition-1118004234","guid":"dataStore-definition-1117674246","id":"dataStore-definition-1117674246","isDatastore":true,"nodeType":"DSCreate","schema":{},"type":"datastore"},"api-definition-1118004234":{"api-authentication":{"auth-all-scopes":null,"auth-apikey-location":"","auth-apikey-name":"","auth-apikey-value":"*******","auth-clientid":"*******","auth-clientsecret":"*******","auth-content-type":"application/x-www-form-urlencoded","auth-flow":"application","auth-password":"","auth-refresh-token":"","auth-scopes":[],"auth-token":"*******","auth-token-url":"https://phscim.id.cyberark.cloud/oauth2/token/api","auth-type":"oauth2","auth-url":"","auth-userid":"","smtp-server-port":0,"smtp-server-url":""},"api-call-body":[{"ref":"text","value":"{"},{"ref":"text","value":"\"directoryServices\":"},{"ref":"text","value":"["},{"ref":"text","value":"\""},{"ref":"text","value":"","_id":"MID4988592814761541"},{"_id":"MID2066172101204451","description":"Read_LDAP_ID (run GetLDAP-DirID Flow first!)","list":[""],"logo":"/pages-gateway/assets/images/db.png","maskParameter":false,"member":true,"name":"Data Value","ref":"dataStore-definition-1111400700","value":"datastorevalue"},{"ref":"text","value":"","_id":"MID47312421584373254"},{"ref":"text","value":"\""},{"ref":"text","value":"]"},{"ref":"text","value":","},{"ref":"text","value":"\"user\":"},{"ref":"text","value":"\""},{"ref":"text","value":"{\\\"Email\\\": {\\\"_eq\\\": \\\"","_id":"MID6936218191192258"},{"_id":"MID9284649526597557","ref":"aapilet-webhook-request-body","title":"Requestinguser Email","type":"(s)","value":"RequestingUser{}.email(s)"},{"ref":"text","value":"\\\"}}","_id":"MID12915957335240935"},{"ref":"text","value":"\""},{"ref":"text","value":"}"}],"api-call-contenttype":"application/json","api-call-form":{},"api-call-header":{},"api-call-path":{},"api-call-query":{},"api-call-type":"post","api-description":"Directory Service Query","api-map-config":{"api-call-body":{"description":"","location":"body","name":"body","webhookInput":null,"webhookValidation":null,"required":false,"prompt":false,"defaultParameter":true},"api-call-form":{},"api-call-header":{},"api-call-path":{},"api-call-query":{}},"api-map-desc":{"api-call-body":"","api-call-form":{},"api-call-header":{},"api-call-path":{},"api-call-query":{}},"apiid":"2dbe99d7-a2db-4640-abe0-4779908a7911","apiname":" Directory Service Query","apiuniqueid":"","appname":"Identity Security Platform","authRequired":false,"basePath":"/","builder-auth-id":"2ccb6a9c-74a3-42b2-9e49-9d3dba56d688","company":"CyberArk","definition-id":"1118004234","endpoint":"/UserMgmt/DirectoryServiceQuery","global_apiid":"29f879cf-a144-4305-b7ef-4de0af7b472c","global_region":"","goto":"api-condition-bool-definition-1119657267","guid":"api-definition-1118004234","host":"phscim.id.cyberark.cloud","id":"api-definition-1118004234","logo":"https://d2jvs8ec336vde.cloudfront.net/cyberark.png","nodeType":"API","scheme":["https"],"version":"1.0.0"},"api-condition-bool-definition-1119657267":{"branchName":"TestSuccessUserDetails","condition":"contains","condition-id":"1119657267","condition-in":{"_id":"MID8775222167929229","image":"","maskParameter":false,"ref":"api-definition-1118004234","title":"Result User Count","type":"(i)","value":"Result{}.User{}.Count(i)"},"condition-true-path":"leftpath","condition-type":"bool","goto":"api-condition-stop-definition-1114129197","guid":"api-condition-bool-definition-1119657267","id":"api-condition-bool-definition-1119657267","map":[{"goto":"api-definition-1111401730","options":true},{"goto":"dataStore-definition-1112068499","options":false}],"nodeType":"Branch","value":{"_id":"MID1903496566872278","ref":"text","value":"1"}},"api-definition-1111401730":{"api-authentication":{"auth-all-scopes":null,"auth-apikey-location":"","auth-apikey-name":"","auth-apikey-value":"*******","auth-clientid":"*******","auth-clientsecret":"*******","auth-content-type":"application/x-www-form-urlencoded","auth-flow":"application","auth-password":"","auth-refresh-token":"","auth-scopes":[],"auth-token":"*******","auth-token-url":"https://phscim.id.cyberark.cloud/oauth2/token/api","auth-type":"oauth2","auth-url":"","auth-userid":"","smtp-server-port":0,"smtp-server-url":""},"api-call-body":[{"ref":"text","value":"{"},{"ref":"text","value":"\"group\":"},{"ref":"text","value":"\""},{"ref":"text","value":"{ \\\"member\\\" : { _eq :\\\"","_id":"MID8689057280312591"},{"_id":"MID8464106932542748","image":"","maskParameter":false,"ref":"api-definition-1118004234","title":"Result User Results Row Distinguishedname","type":"(s)","value":"Result{}.User{}.Results[0].Row{}.DistinguishedName(s)"},{"ref":"text","value":"\\\"} }","_id":"MID12687207562731917"},{"ref":"text","value":"\""},{"ref":"text","value":","},{"ref":"text","value":"\"directoryServices\":"},{"ref":"text","value":"["},{"ref":"text","value":"\""},{"ref":"text","value":"","_id":"MID5771664073032137"},{"_id":"MID18953281643945852","description":"Read_LDAP_ID (run GetLDAP-DirID Flow first!)","list":[""],"logo":"/pages-gateway/assets/images/db.png","maskParameter":false,"member":true,"name":"Data Value","ref":"dataStore-definition-1111400700","value":"datastorevalue"},{"ref":"text","value":"","_id":"MID5665709623519897"},{"ref":"text","value":"\""},{"ref":"text","value":"]"},{"ref":"text","value":","},{"ref":"text","value":"\"Args\":"},{"ref":"text","value":"{"},{"ref":"text","value":"\"PageNumber\":"},{"ref":"text","value":"1","_id":"MID9712480399244721"},{"ref":"text","value":","},{"ref":"text","value":"\"PageSize\":"},{"ref":"text","value":"2","_id":"MID8890240461913645"},{"ref":"text","value":","},{"ref":"text","value":"\"Limit\":"},{"ref":"text","value":"100000","_id":"MID8949406927322383"},{"ref":"text","value":","},{"ref":"text","value":"\"SortBy\":"},{"ref":"text","value":"\""},{"ref":"text","value":""},{"ref":"text","value":"\""},{"ref":"text","value":","},{"ref":"text","value":"\"Caching\":"},{"ref":"text","value":"-1    ","_id":"MID7075352616931259"},{"ref":"text","value":"}"},{"ref":"text","value":"}"}],"api-call-contenttype":"application/json","api-call-form":{},"api-call-header":{},"api-call-path":{},"api-call-query":{},"api-call-type":"post","api-map-config":{"api-call-body":{"description":"","location":"body","name":"body","type":"object","webhookInput":null,"webhookValidation":null,"required":false,"prompt":false,"defaultParameter":true},"api-call-form":{},"api-call-header":{},"api-call-path":{},"api-call-query":{}},"api-map-desc":{"api-call-body":"","api-call-form":{},"api-call-header":{},"api-call-path":{},"api-call-query":{}},"apiid":"c8a9839c-9a11-4735-ae1f-b4edd0ce915f","apiname":"api-1111401730","apiuniqueid":"","appname":"appname-1111401730","authRequired":false,"basePath":"/UserMgmt","builder-auth-id":"2ccb6a9c-74a3-42b2-9e49-9d3dba56d688","company":"","definition-id":"1111401730","endpoint":"/DirectoryServiceQuery","global_apiid":"","global_region":"","goto":"dataStore-definition-1111438492","host":"phscim.id.cyberark.cloud","id":"api-definition-1111401730","logo":"","nodeType":"API","scheme":["https"],"version":"1.0.0"},"dataStore-definition-1111438492":{"dataStore-map-values":{"data":[{"_id":"MID9974721570711833","ref":"text","value":"{\"status\":\"User details found and progressed to read groups\"}"}],"dataid":[],"dataname":[{"_id":"MID6858764488534752","ref":"text","value":"DC-STATUS-"},{"_id":"MID3677594114466691","ref":"aapilet-webhook-request-body","title":"Requestinguser Email","type":"(s)","value":"RequestingUser{}.email(s)"},{"_id":"MID5294189906818909","ref":"text","value":""}]},"dataStoreName":"Progress status update","datastoreType":"update","definition-id":"1111438492","goto":"loop-definition-1111161810","id":"dataStore-definition-1111438492","isDatastore":true,"schema":{},"type":"datastore","nodeType":"DSUpdate"},"loop-definition-1111161810":{"condition-type":"loop","definition-id":"1111161810","goto":"dataStore-definition-1113023028","id":"loop-definition-1111161810","isConditionLoop":true,"loop-map-values":{"initialization":[],"iteration-goto":"","iteration-value":[{"_id":"MID006769847020368758","ref":"text","value":""},{"_id":"MID5579493932532087","image":"","maskParameter":false,"ref":"api-definition-1111401730","title":"Result Group Results","type":"[{}]","value":"Result{}.Group{}.Results[{}]"},{"_id":"MID44672974296722145","ref":"text","value":""}],"loop-type":"forEach","operations":""},"loopName":"LoopGroups","loopstop-definition":"loop-definition-1111161810","loopstop-id":"loop-stop-definition-1111069807","nodeType":"Loop","schema":{"Entities":[{"IsForeignKey":false,"Key":"??","Type":"Group"}],"Row":{"Description":null,"DirectoryServiceUuid":"6d87c52d-def4-d730-fae4-32796703456d","DisplayName":"VaultAdmins","DistinguishedName":"CN=VaultAdmins,CN=Users,DC=CYBR,DC=COM","ExternalUuid":"CN=VaultAdmins,CN=Users,DC=CYBR,DC=COM","Forest":"DC=CYBR,DC=COM","InternalName":"CN=VaultAdmins,CN=Users,DC=CYBR,DC=COM","ServiceInstance":"LDAP","ServiceInstanceLocalized":"LDAP","ServiceType":"LDAPProxy","SystemName":"VaultAdmins"}},"type":"loop"},"dataStore-definition-1113023028":{"dataStore-map-values":{"dataid":[],"dataname":[{"_id":"MID9933404335112577","ref":"text","value":"DC-GROUPS-"},{"_id":"MID2194203806857138","ref":"aapilet-webhook-request-body","title":"Requestinguser Email","type":"(s)","value":"RequestingUser{}.email(s)"},{"_id":"MID382241609861641","ref":"text","value":""}]},"dataStoreName":"ReadTempGroupMembershipDB","datastoreType":"read","definition-id":"1113023028","goto":"dataStore-definition-1113816668","id":"dataStore-definition-1113023028","isDatastore":true,"nodeType":"DSRead","schema":{},"type":"datastore"},"dataStore-definition-1113816668":{"dataStore-map-values":{"data":[{"_id":"MID9095595969346895","ref":"text","value":""},{"_id":"MID41714675888565744","description":"ReadTempGroupMembershipDB","maskParameter":false,"member":true,"name":"Data Value","ref":"dataStore-definition-1113023028","value":"datastorevalue","logo":"/pages-gateway/assets/images/db.png","list":[""]},{"_id":"MID22907903817334807","ref":"text","value":" - "},{"_id":"MID6926784247722451","image":"","maskParameter":false,"ref":"loop-definition-1111161810","title":"Row Distinguishedname","type":"(s)","value":"Row{}.DistinguishedName(s)","logo":"/pages-gateway/assets/images/builder/loop-solid.svg","list":[""]},{"_id":"MID5089733882148701","ref":"text","value":""}],"dataid":[],"dataname":[{"_id":"MID9562498566306845","ref":"text","value":"DC-GROUPS-"},{"_id":"MID5142707044507793","ref":"aapilet-webhook-request-body","title":"Requestinguser Email","type":"(s)","value":"RequestingUser{}.email(s)"},{"_id":"MID6815800869266029","ref":"text","value":""}]},"dataStoreName":"datastore-1113816668","datastoreType":"update","definition-id":"1113816668","goto":"loop-stop-definition-1111069807","id":"dataStore-definition-1113816668","isDatastore":true,"nodeType":"DSUpdate","schema":{},"type":"datastore"},"loop-stop-definition-1111069807":{"goto":"dataStore-definition-1119252373","id":"loop-stop-definition-1111069807","nodeType":"EndLoop"},"dataStore-definition-1119252373":{"dataStore-map-values":{"data":[{"_id":"MID9719235626670366","ref":"text","value":"{\"status\":\"Group members read finished\"}"}],"dataid":[],"dataname":[{"_id":"MID9416226944481063","ref":"text","value":"DC-STATUS-"},{"_id":"MID3362204062583942","ref":"aapilet-webhook-request-body","title":"Requestinguser Email","type":"(s)","value":"RequestingUser{}.email(s)"},{"_id":"MID9168671413526372","ref":"text","value":""}]},"dataStoreName":"update status progress","datastoreType":"update","definition-id":"1119252373","goto":"dataStore-definition-1117620620","id":"dataStore-definition-1119252373","isDatastore":true,"schema":{},"type":"datastore","nodeType":"DSUpdate"},"dataStore-definition-1112068499":{"dataStore-map-values":{"data":[{"_id":"MID9053510831420508","ref":"text","value":"{\"status\":\"Too many or no results found for directory query user email:"},{"_id":"MID7639112875827794","ref":"aapilet-webhook-request-body","title":"Requestinguser Email","type":"(s)","value":"RequestingUser{}.email(s)"},{"_id":"MID6229656606038052","ref":"text","value":"\"}"}],"dataid":[],"dataname":[{"_id":"MID6934238361532856","ref":"text","value":"DC-STATUS-"},{"_id":"MID30607534798032376","ref":"aapilet-webhook-request-body","title":"Requestinguser Email","type":"(s)","value":"RequestingUser{}.email(s)"},{"_id":"MID9379801579313394","ref":"text","value":""}]},"dataStoreName":"UpdateStatusRecord","datastoreType":"update","definition-id":"1112068499","goto":"dataStore-definition-1117620620","id":"dataStore-definition-1112068499","isDatastore":true,"nodeType":"DSUpdate","schema":{},"type":"datastore"},"dataStore-definition-1117620620":{"dataStore-map-values":{"dataid":[],"dataname":[{"_id":"MID6436084403949835","ref":"text","value":"DC-GROUPS-"},{"_id":"MID6191746843441461","ref":"aapilet-webhook-request-body","title":"Requestinguser Email","type":"(s)","value":"RequestingUser{}.email(s)"},{"_id":"MID6805850813556624","ref":"text","value":""}]},"dataStoreName":"ReadTotalGroups","datastoreType":"read","definition-id":"1117620620","goto":"api-condition-stop-definition-1114129197","guid":"dataStore-definition-1117620620","id":"dataStore-definition-1117620620","isDatastore":true,"nodeType":"DSRead","schema":{},"type":"datastore"},"api-condition-stop-definition-1114129197":{"condition-id":"1114129197","condition-type":"Stop","customresponse":true,"guid":"api-condition-stop-definition-1114129197","id":"api-condition-stop-definition-1114129197","killconnection":true,"nodeType":"Stop","responseformat":{"content-type":"application/json","response-body":[{"ref":"text","value":"{"},{"ref":"text","value":"\"ValidRequest\":"},{"ref":"text","value":"\""},{"ref":"text","value":"false"},{"ref":"text","value":"\""},{"ref":"text","value":","},{"ref":"text","value":"\"ErrorMessage\":"},{"ref":"text","value":"\""},{"ref":"text","value":""},{"_id":"MID08886168384102633","description":"ReadTotalGroups","maskParameter":false,"member":true,"name":"Data Value","ref":"dataStore-definition-1117620620","value":"datastorevalue"},{"ref":"text","value":""},{"ref":"text","value":"\""},{"ref":"text","value":"}"}],"response-config":{"response-header":{},"response-body":{"name":"body"}},"response-header":{}},"usecustomresponse":false}},"enabled":false}}